/*
Team.fcg
Main team script, attached to the team entity.
*/
import "StdLibrary.fcc" as StdLib
import "EditorGenLib.fcc" as EditorLib
import "../Globals/GlobalTeam.fcg" as GlobalTeam
graph Team {

    // ------ Variables ------
    currentAlives int = -1 // Current number of alive players in the team
    currentKnockeds int = -1 // Current number of knocked players in the team
    currentEliminateds int = -1 // Current number of eliminated players in the team
    opposingTeam entity<Team> = nil // Reference to the opposing team
    teamIndex int = -1 // Index of the team in the global team list
    opposingTeamList List<entity<Team>> = List<entity<Team>>{} // List of opposing teams
    teamName string = "" // Name of the team
    teamColor Color = #ffffff // Color of the team
    // ------ Events ------
    //Executed when entity is created
    event OnAwake() {
        globalEntity<GlobalTeam>.AddTeam(thisEntity as entity<Team>)
    }

    // ------- Functions -------
    // Init team status
    func InitTeamConfig(){
        // Init color for each team
        var teams = GetAllTeams()
        if thisEntity == teams[0] {
            teamName = LocString{"RED", List<string>{}}
            teamColor = #cc1717
        } else if thisEntity == teams[1] {
            teamName = LocString{"BLUE", List<string>{}}
            teamColor = #1c14ad
        } else if thisEntity == teams[2] {
            teamName = LocString{"YELLOW", List<string>{}}
            teamColor = #d1a331
        } else if thisEntity == teams[3] {
            teamName = LocString{"GREEN", List<string>{}}
            teamColor = #0a8f09
        } else {
            LogError("More than 4 teams detected! Please check the team setup.")
            teamName = LocString{"WHITE", List<string>{}}
            teamColor = #ffffff
        }
    }
}